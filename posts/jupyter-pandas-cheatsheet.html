<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon shortcut" type="image/png" href="https://ttyfky.github.io/logo.png"/><meta property="og:title" content="Cheatsheet of Jupyter Notebook and Pandas"/><meta property="og:url" content="https://ttyfky.github.io/posts/jupyter-pandas-cheatsheet"/><meta name="twitter:card" content="summary"/><meta property="og:site" content="ttyfky.github.io"/><meta property="og:image" content="https://ttyfky.github.io/og.png"/><meta name="description" content="Frequently using expression in Jupyter Notebook and Pandas"/><meta property="og:description" content="Frequently using expression in Jupyter Notebook and Pandas"/><link rel="canonical" href="https://ttyfky.github.io/posts/jupyter-pandas-cheatsheet"/><title>Cheatsheet of Jupyter Notebook and Pandas</title><meta name="next-head-count" content="13"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/4ff6615d8fb8e460.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ff6615d8fb8e460.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-a0dca5a2ff5035f1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ec385de0df889461.js" defer=""></script><script src="/_next/static/chunks/880-f1d70106926f6aa4.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-1d0ae5fa11fa5e82.js" defer=""></script><script src="/_next/static/zA6gxw_dxFZp1nsazOUt-/_buildManifest.js" defer=""></script><script src="/_next/static/zA6gxw_dxFZp1nsazOUt-/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2JL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa0ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2ZL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa2pL7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa25L7W0Q5n-wU.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="/avatars/profile.jpg" alt="ttyfky.github.io" class="site-header__logo-img"/><h3 class="site-header__title">ttyfky.github.io</h3></a><div class="site-header__links"><a class="site-header__link" href="/">Home</a><a class="site-header__link" href="/bio">Bio</a></div></div></div></header><div class="content-wrapper"><article class="posts__body"><h1>Cheatsheet of Jupyter Notebook and Pandas</h1><div class="posts__date">2022-03-01<ul class="tag__ul"><li class="tag__li"><a class="tag__link" href="/tags/python">#python</a></li><li class="tag__li"><a class="tag__link" href="/tags/pandas">#pandas</a></li><li class="tag__li"><a class="tag__link" href="/tags/jupyter">#jupyter</a></li></ul></div><br/><div><h1 id="overview">Overview</h1>
<p>This article is a personal cheatsheet for frequent usecase of Jupyter Notebook (Colaboratory) and pandas.</p>
<h1 id="spreadsheet-manipulation">Spreadsheet Manipulation</h1>
<h2 id="load-ss-values-to-dataframe">Load s/s values to Dataframe</h2>
<p>Connect to Google Spreadsheet from Colaboratory.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># Authorize.</span>
<span class="hljs-keyword">from</span> google.colab <span class="hljs-keyword">import</span> auth
auth.authenticate_user()

<span class="hljs-keyword">import</span> gspread
<span class="hljs-keyword">from</span> google.auth <span class="hljs-keyword">import</span> default
creds, _ = default()

sskey=<span class="hljs-string">&#x27;YOUR_SS_KEY&#x27;</span> <span class="hljs-comment"># Find value from URL.</span>

gc = gspread.authorize(creds)

workbook = gc.open_by_key(offer_sskey)
sheet = workbook.worksheet(<span class="hljs-string">&#x27;SHEET_NAME&#x27;</span>)

<span class="hljs-comment"># Load all values as DataFrame.</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
df = pd.DataFrame(sheet.get_all_values())
</code></pre>
<h1 id="pandas">Pandas</h1>
<h2 id="manipulation">Manipulation</h2>
<h3 id="put-first-row-to-header-of-dataframe">Put first row to header of Dataframe</h3>
<pre><code class="hljs language-python">df = df.rename(columns=df.iloc[<span class="hljs-number">0</span>])
<span class="hljs-comment"># Drop the header row from DataFrame.</span>
df = df.drop([<span class="hljs-number">0</span>])
</code></pre>
<h3 id="join-two-dataframes">Join two DataFrames</h3>
<pre><code class="hljs language-python">df3 = df.merge(df2, on=<span class="hljs-string">&#x27;id&#x27;</span>)
</code></pre>
<h3 id="cast-type">Cast type</h3>
<p>Value types can be marked as <code>object</code>. In such case describe after grouping won&#x27;t work well.<br/>
Casting the value as desirable type would be good.</p>
<pre><code class="hljs language-python">df[<span class="hljs-string">&#x27;key&#x27;</span>] = df[<span class="hljs-string">&#x27;key&#x27;</span>].astype(<span class="hljs-string">&quot;int&quot;</span>)
</code></pre>
<h3 id="rename-column">Rename column</h3>
<pre><code class="hljs language-python">df.rename(columns={<span class="hljs-string">&#x27;key_original&#x27;</span>: <span class="hljs-string">&#x27;key_renamed&#x27;</span>, <span class="hljs-string">&#x27;before&#x27;</span>:<span class="hljs-string">&#x27;after&#x27;</span>})
</code></pre>
<h3 id="set-index-to-column">Set Index to column</h3>
<pre><code class="hljs language-python">df.reset_index(level=<span class="hljs-number">0</span>)
</code></pre>
<h3 id="grouping">Grouping</h3>
<pre><code class="hljs language-python">group = df.groupby([<span class="hljs-string">&#x27;key&#x27;</span>])
group.describe()
</code></pre></div></article></div><footer class="site-footer"><div class="content-wrapper"><p>© <!-- -->ttyfky</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"jupyter-pandas-cheatsheet","postData":{"id":"jupyter-pandas-cheatsheet","contentHtml":"\u003ch1 id=\"overview\"\u003eOverview\u003c/h1\u003e\n\u003cp\u003eThis article is a personal cheatsheet for frequent usecase of Jupyter Notebook (Colaboratory) and pandas.\u003c/p\u003e\n\u003ch1 id=\"spreadsheet-manipulation\"\u003eSpreadsheet Manipulation\u003c/h1\u003e\n\u003ch2 id=\"load-ss-values-to-dataframe\"\u003eLoad s/s values to Dataframe\u003c/h2\u003e\n\u003cp\u003eConnect to Google Spreadsheet from Colaboratory.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Authorize.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e google.colab \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e auth\nauth.authenticate_user()\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e gspread\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e google.auth \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e default\ncreds, _ = default()\n\nsskey=\u003cspan class=\"hljs-string\"\u003e'YOUR_SS_KEY'\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Find value from URL.\u003c/span\u003e\n\ngc = gspread.authorize(creds)\n\nworkbook = gc.open_by_key(offer_sskey)\nsheet = workbook.worksheet(\u003cspan class=\"hljs-string\"\u003e'SHEET_NAME'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# Load all values as DataFrame.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\ndf = pd.DataFrame(sheet.get_all_values())\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"pandas\"\u003ePandas\u003c/h1\u003e\n\u003ch2 id=\"manipulation\"\u003eManipulation\u003c/h2\u003e\n\u003ch3 id=\"put-first-row-to-header-of-dataframe\"\u003ePut first row to header of Dataframe\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edf = df.rename(columns=df.iloc[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\u003cspan class=\"hljs-comment\"\u003e# Drop the header row from DataFrame.\u003c/span\u003e\ndf = df.drop([\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e])\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"join-two-dataframes\"\u003eJoin two DataFrames\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edf3 = df.merge(df2, on=\u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"cast-type\"\u003eCast type\u003c/h3\u003e\n\u003cp\u003eValue types can be marked as \u003ccode\u003eobject\u003c/code\u003e. In such case describe after grouping won't work well.\u003cbr\u003e\nCasting the value as desirable type would be good.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edf[\u003cspan class=\"hljs-string\"\u003e'key'\u003c/span\u003e] = df[\u003cspan class=\"hljs-string\"\u003e'key'\u003c/span\u003e].astype(\u003cspan class=\"hljs-string\"\u003e\"int\"\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"rename-column\"\u003eRename column\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edf.rename(columns={\u003cspan class=\"hljs-string\"\u003e'key_original'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'key_renamed'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'before'\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e'after'\u003c/span\u003e})\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"set-index-to-column\"\u003eSet Index to column\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003edf.reset_index(level=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"grouping\"\u003eGrouping\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003egroup = df.groupby([\u003cspan class=\"hljs-string\"\u003e'key'\u003c/span\u003e])\ngroup.describe()\n\u003c/code\u003e\u003c/pre\u003e","title":"Cheatsheet of Jupyter Notebook and Pandas","date":"2022-03-01","tags":["python","pandas","jupyter"],"description":"Frequently using expression in Jupyter Notebook and Pandas","published":false}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"jupyter-pandas-cheatsheet"},"buildId":"zA6gxw_dxFZp1nsazOUt-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>